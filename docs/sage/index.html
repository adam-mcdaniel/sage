<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Sage Programming Language"><title>sage - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sage" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.1 (eb26296b5 2023-08-03)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../sage/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../sage/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate sage</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.0.1-alpha</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">sage</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/sage/lib.rs.html#1-119">source</a> ¬∑ <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="the-sage-programming-language"><a href="#the-sage-programming-language">The Sage Programming Language</a></h2>
<p>üöß üèóÔ∏è ‚ö†Ô∏è This language is under construction! ‚ö†Ô∏è üèóÔ∏è üöß</p>
<div class="example-wrap"><pre class="language-text"><code>  ‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   `-.        _.-&#39;
 ‚ñà‚ñà‚ñà‚ñë‚ñë   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà   \ `,    .&#39;/.&#39;
‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     \`.`. :.-&#39;.-= .-&#39;/
 ‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë       `-.:/o  .&#39;-&#39;/ .&#39;
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà         o\o / ._/.&#39;
‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë            \| /o|\`.
                   ‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà                    |&#39;o `.`.&#39;.
                  ‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                           `--&#39;
                   ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë            
</code></pre></div>
<p><img src="https://github.com/adam-mcdaniel/sage/blob/main/assets/sage.png" alt="Logo" /></p>
<p><embed type="text/html" src="web/index.html" title="Compiler" width="100%" height="940em"></embed>
<em><strong>(The sage compiler itself can be compiled to web assembly to be executed on the web. This allows a sage compiler + interpreter to be hosted on a static web page and run embedded sage scripts. This web implementation compiles sage LIR code into sage virtual machine code, and then feeds it to a builtin virtual machine interpreter. The compiler can also switch to various backends, such as the C source code generator, or assembly output.)</strong></em></p>
<p>This crate implements a compiler for the sage programming language
and its low level virtual machine.</p>
<h3 id="what-is-sage"><a href="#what-is-sage">What is Sage?</a></h3>
<p>Sage is a programming language with a low level virtual machine based on a Turing tape.
The sage virtual machine has a read/write head and a single register.
The read/write head moves around the tape, and uses the register as an accumulator.
All worldly input is done through a single instruction, and all worldly output is done through a single instruction.
Functionality which cannot be achieved with any algorithm, such as using an operating system‚Äôs system calls to write
to persistent memory, is also done through two instructions: one for sending values to the virtual machine‚Äôs foreign
function interface, and one for receiving. The goal of the virtual machine is to allow algorithms to be expressed in
the same time complexity as they would on x86, but with the smallest possible number of instructions. This allows sage
code to be <em>maximally</em> portable: <a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md">sage‚Äôs core instruction set</a> could be implemented in hardware much easier
than any modern architecture due to its very small pool of opcodes and their simplicity.</p>
<h3 id="index"><a href="#index">Index</a></h3>
<ol>
<li><a href="./lir/index.html">The Lower Intermediate Representation</a></li>
<li><a href="./asm/index.html">The Assembly Language</a></li>
<li><a href="./vm/index.html">The Virtual Machine</a></li>
<li><a href="./targets/index.html">Target Backends</a></li>
</ol>
<h3 id="stages-of-ir"><a href="#stages-of-ir">Stages of IR</a></h3>
<p>Here are the current stages of IR:</p>
<ol>
<li>LIR (Lower Intermediate Representation)</li>
<li>Core / Standard Assembly (an assembly language for the VM)</li>
<li>Core / Standard Virtual Machine Code (which is built for a given target)</li>
</ol>
<h3 id="backend"><a href="#backend">Backend</a></h3>
<p>This compiler is unique in the way that it handles portability.
The language‚Äôs backend is split in two: the Core variant, and the
Standard variant. The Core variant is guaranteed to compile to all
targets, and the Standard variant is akin to a standard library of
instructions (which are implemented for most targets).</p>
<p>This makes sage uniquely equipped to compile to very limited arcitectures:
<strong>the Core instruction set for the virtual machine is <em>almost guaranteed</em>
to be a subset of most CPU architectures.</strong></p>
<p>The Core instructions are required to be implemented by <em>every target</em>. These instructions are guaranteed to be supported by every target.</p>
<div><table><thead><tr><th></th><th>The</th><th>Twenty</th><th>and</th><th>Four</th><th>Canonical</th><th>Instructions</th></tr></thead><tbody>
<tr><td>Memory</td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#move"><code>Move(n: int)</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#index"><code>Index</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#where"><code>Where?</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#deref-and-refer"><code>Deref</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#deref-and-refer"><code>Refer</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#bitwisenand"><code>BitwiseNand</code></a></td></tr>
<tr><td>Control Flow</td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#while-if-and-else"><code>While</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#while-if-and-else"><code>If</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#while-if-and-else"><code>Else</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#function-call-and-return"><code>Function</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#function-call-and-return"><code>Call</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#function-call-and-return"><code>Return</code></a></td></tr>
<tr><td>Arithmetic</td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#isnonnegative"><code>IsNonNegative?</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#add-and-subtract"><code>Add</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#add-and-subtract"><code>Subtract</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#multiply-and-divide"><code>Multiply</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#multiply-and-divide"><code>Divide</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#remainder"><code>Remainder</code></a></td></tr>
<tr><td>Fundamental</td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#set"><code>Set(n: int)</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#save-and-restore"><code>Save</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#save-and-restore"><code>Restore</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#get-and-put"><code>Get</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#put-and-put"><code>Put</code></a></td><td><a href="https://github.com/adam-mcdaniel/sage/blob/main/CORE.md#end"><code>End</code></a></td></tr>
</tbody></table>
</div>
<p>The standard instructions are not guaranteed) to be wholly implemented by every target, or at all. A target for Linux on x86 will certainly implement all the standard instructions, but a thermostat might implement only a few or none.</p>
<div><table><thead><tr><th></th><th>The</th><th>Twenty</th><th>and</th><th>Four</th><th>Standard</th><th>Instructions</th></tr></thead><tbody>
<tr><td>Memory and Fundamental</td><td><code>Allocate</code></td><td><code>Free</code></td><td><code>Set(n: float)</code></td><td><code>ToInt</code></td><td><code>ToFloat</code></td><td><code>Power</code></td></tr>
<tr><td>Trigonometry</td><td><code>Sine</code></td><td><code>Cosine</code></td><td><code>Tangent</code></td><td><code>ArcSine</code></td><td><code>ArcCosine</code></td><td><code>ArcTangent</code></td></tr>
<tr><td>Arithmetic</td><td><code>IsNonNegative?</code></td><td><code>Add</code></td><td><code>Subtract</code></td><td><code>Multiply</code></td><td><code>Divide</code></td><td><code>Remainder</code></td></tr>
<tr><td>Worldly</td><td><code>GetChar</code></td><td><code>PutChar</code></td><td><code>GetInt</code></td><td><code>PutInt</code></td><td><code>GetFloat</code></td><td><code>PutFloat</code></td></tr>
</tbody></table>
</div></div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="asm/index.html" title="mod sage::asm">asm</a></div><div class="desc docblock-short">Assembly Module</div></li><li><div class="item-name"><a class="mod" href="frontend/index.html" title="mod sage::frontend">frontend</a></div></li><li><div class="item-name"><a class="mod" href="lir/index.html" title="mod sage::lir">lir</a></div><div class="desc docblock-short">LIR (Low Intermediate Representation) Module</div></li><li><div class="item-name"><a class="mod" href="parse/index.html" title="mod sage::parse">parse</a></div><div class="desc docblock-short">Parsing Module</div></li><li><div class="item-name"><a class="mod" href="side_effects/index.html" title="mod sage::side_effects">side_effects</a></div></li><li><div class="item-name"><a class="mod" href="targets/index.html" title="mod sage::targets">targets</a></div><div class="desc docblock-short">Targets Module</div></li><li><div class="item-name"><a class="mod" href="vm/index.html" title="mod sage::vm">vm</a></div><div class="desc docblock-short">Virtual Machine Module</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.LOGO.html" title="constant sage::LOGO">LOGO</a></div><div class="desc docblock-short">The UNICODE character art for the logo of the language.</div></li><li><div class="item-name"><a class="constant" href="constant.LOGO_WITH_COLOR.html" title="constant sage::LOGO_WITH_COLOR">LOGO_WITH_COLOR</a></div><div class="desc docblock-short">The UNICODE character art for the logo of the language, using ANSI escape codes for color.</div></li><li><div class="item-name"><a class="constant" href="constant.NULL.html" title="constant sage::NULL">NULL</a></div><div class="desc docblock-short">The value of the NULL pointer constant.</div></li></ul></section></div></main></body></html>